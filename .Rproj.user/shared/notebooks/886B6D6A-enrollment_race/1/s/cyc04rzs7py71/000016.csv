"0","names <- c(""1718"", ""1617"", "
"0","           ""1516"", ""1415"", "
"0","           ""1314"", ""1213"", "
"0","           ""1112"", ""1011"")"
"0","df <- readRDS(here(""ctsde/outputs"", str_glue(""enrollment_race_{names[1]}.rds""))) %>% "
"0","  select(District, Year, 'Race/Ethnicity', Value)"
"0","for (i in 2:(length(names))) {"
"0","  temp <- readRDS(here(""ctsde/outputs"", str_glue(""enrollment_race_{names[i]}.rds""))) %>% "
"0","               select(District, Year, 'Race/Ethnicity', Value)"
"0","  df <- bind_rows(df, temp)"
"0","}"
"0","df <- df %>% "
"0","  as_tibble() %>% "
"0","  mutate_at('Value', as.numeric) %>% "
"0","  na_if(-9999) %>% "
"0","  mutate_all(funs(ifelse(is.na(.), 0, .))) %>% "
"0","  dplyr::filter(.$'District' %in% nh_dists$'district') %>% "
"0","  rename('district' = ""District"") %>% "
"0","  right_join(nh_dists, by = 'district') %>% "
"0","  group_by(district, Year) %>% "
"0","  mutate(total = sum(Value)) %>% "
"0","  dplyr::filter(`Race/Ethnicity` == ""White"") %>% "
"0","  mutate(perc_white = 100 * Value / total) %>% "
"0","  mutate(perc_minority = 100 - perc_white) %>% "
"0","  select(region, district, Year, perc_minority)"
"0","unique(df$district)"
"1"," [1]"
"1"," ""East Haven School District""    "
"1"," ""Hamden School District""        "
"1"," ""West Haven School District""    "
"1"," ""Bethany School District""       "
"1","
"
"1"," [5]"
"1"," ""Branford School District""      "
"1"," ""Guilford School District""      "
"1"," ""Madison School District""       "
"1"," ""Milford School District""       "
"1","
"
"1"," [9]"
"1"," ""North Branford School District"""
"1"," ""North Haven School District""   "
"1"," ""Orange School District""        "
"1"," ""Woodbridge School District""    "
"1","
"
"1","[13]"
"1"," ""New Haven School District""     "
"1","
"
