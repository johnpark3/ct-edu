"0","names <- c(""1718"", ""1617"", "
"0","           ""1516"", ""1415"", "
"0","           ""1314"", ""1213"", "
"0","           ""1112"", ""1011"")"
"0","df1 <- map_dfr (names, function(name) { "
"0","  readRDS(here(""ctsde/outputs"", str_glue(""enrollment_race_{name}.rds"")))"
"0","  }"
"0","  )"
"0","df1 <- df1 %>% "
"0","  as_tibble() %>% "
"0","  mutate_at('Value', as.numeric) %>% "
"0","  na_if(-9999) %>% "
"0","  mutate_all(funs(ifelse(is.na(.), 0, .))) %>% "
"0","  dplyr::filter(.$'District' %in% nh_dists$'district') %>% "
"0","  rename('district' = ""District"") %>% "
"0","  right_join(nh_dists, by = 'district') %>% "
"0","  group_by(district, Year) %>% "
"0","  mutate(total = sum(Value)) %>% "
"0","  ungroup() %>% "
"0","  dplyr::filter(`Race/Ethnicity` == ""White"") %>% "
"0","  mutate(perc_white = 100 * Value / total) %>% "
"0","  mutate(student = 100 - perc_white) %>% # percent minority students"
"0","  mutate(year = Year) %>% "
"0","  mutate_at('year', str_sub, start=-4, end=-1) %>% "
"0","  mutate_at('year', as.numeric) %>% "
"0","  select(region, district, year, student)"
"0","dim(df1)"
"1","[1]"
"1"," 104"
"1","   4"
"1","
"
