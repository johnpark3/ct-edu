labs(title = "Household Income Percentiles by Region") +
xlab("times greater than bottom 20%")
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Household Income Percentiles by Region") +
labs(x = "times greater than bottom 20%")
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Household Income Percentiles by Region", x = "times greater than bottom 20%")
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Household Income Percentiles by Region", y = "times greater than bottom 20%")
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Household Income Percentiles by Region",
y = "Times greater than bottom 20%",
x = "Region")
quants <- svyby(~hhincome, ~region, income_des, svyquantile, quantiles = c(0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 0.95), keep.var = F) %>%
as.data.frame() %>%
as_tibble() %>%
setNames(c("region", "q20", "q30", "q40", "q50", "q60", "q70", "q80","q90")) %>%
mutate_if(is.numeric, round) %>%
mutate(ratio95_20 = round(q95 / q20, digits = 3)) %>%
mutate(ratio90_20 = round(q90 / q20, digits = 3)) %>%
mutate(ratio80_20 = round(q80 / q20, digits = 3)) %>%
mutate(ratio70_20 = round(q70 / q20, digits = 3)) %>%
mutate(ratio60_20 = round(q60 / q20, digits = 3)) %>%
mutate(ratio50_20 = round(q50 / q20, digits = 3)) %>%
mutate(ratio40_20 = round(q40 / q20, digits = 3)) %>%
mutate(ratio30_20 = round(q30 / q20, digits = 3)) %>%
mutate(ratio20_20 = round(q20 / q20, digits = 3))
quants <- svyby(~hhincome, ~region, income_des, svyquantile, quantiles = c(0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 0.95), keep.var = F) %>%
as.data.frame() %>%
as_tibble() %>%
setNames(c("region", "q20", "q30", "q40", "q50", "q60", "q70", "q80","q90", "q95")) %>%
mutate_if(is.numeric, round) %>%
mutate(ratio95_20 = round(q95 / q20, digits = 3)) %>%
mutate(ratio90_20 = round(q90 / q20, digits = 3)) %>%
mutate(ratio80_20 = round(q80 / q20, digits = 3)) %>%
mutate(ratio70_20 = round(q70 / q20, digits = 3)) %>%
mutate(ratio60_20 = round(q60 / q20, digits = 3)) %>%
mutate(ratio50_20 = round(q50 / q20, digits = 3)) %>%
mutate(ratio40_20 = round(q40 / q20, digits = 3)) %>%
mutate(ratio30_20 = round(q30 / q20, digits = 3)) %>%
mutate(ratio20_20 = round(q20 / q20, digits = 3))
quants2 <- quants %>%
mutate_at("region", str_replace, pattern = " Towns", replacement = "") %>%
mutate_at("region", str_replace, pattern = " Town", replacement = "") %>%
mutate_at("region", str_replace, pattern = "East Haven, Branford, Guilford, Madison & North Branford", replacement = "EH, B, G, M, NB") %>%
mutate_at("region", str_replace, pattern = "Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany", replacement = "H, A, S, D, W, B") %>%
mutate_at("region", str_replace, pattern = "West Haven, Milford & Orange", replacement = "WH, Milford, Orange") %>%
gather(percentile, value, ratio95_20:ratio20_20) %>%
select(-(q20:q90)) %>%
mutate_at('percentile', substr, start=6, stop=7) %>%
mutate_at('percentile', as.numeric)
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Household Income Percentiles by Region",
y = "Times greater than bottom 20%",
x = "Region")
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10, 11)]) +
labs(title = "Household Income Percentiles by Region",
y = "Times greater than bottom 20%",
x = "Region")
quants <- svyby(~hhincome, ~region, income_des, svyquantile, quantiles = c(0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9), keep.var = F) %>%
as.data.frame() %>%
as_tibble() %>%
setNames(c("region", "q20", "q30", "q40", "q50", "q60", "q70", "q80","q90")) %>%
mutate_if(is.numeric, round) %>%
mutate(ratio90_20 = round(q90 / q20, digits = 3)) %>%
mutate(ratio80_20 = round(q80 / q20, digits = 3)) %>%
mutate(ratio70_20 = round(q70 / q20, digits = 3)) %>%
mutate(ratio60_20 = round(q60 / q20, digits = 3)) %>%
mutate(ratio50_20 = round(q50 / q20, digits = 3)) %>%
mutate(ratio40_20 = round(q40 / q20, digits = 3)) %>%
mutate(ratio30_20 = round(q30 / q20, digits = 3)) %>%
mutate(ratio20_20 = round(q20 / q20, digits = 3))
quants2 <- quants %>%
mutate_at("region", str_replace, pattern = " Towns", replacement = "") %>%
mutate_at("region", str_replace, pattern = " Town", replacement = "") %>%
mutate_at("region", str_replace, pattern = "East Haven, Branford, Guilford, Madison & North Branford", replacement = "EH, B, G, M, NB") %>%
mutate_at("region", str_replace, pattern = "Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany", replacement = "H, A, S, D, W, B") %>%
mutate_at("region", str_replace, pattern = "West Haven, Milford & Orange", replacement = "WH, Milford, Orange") %>%
gather(percentile, value, ratio90_20:ratio20_20) %>%
select(-(q20:q90)) %>%
mutate_at('percentile', substr, start=6, stop=7) %>%
mutate_at('percentile', as.numeric)
quants2 %>%
mutate(region = as_factor(region) %>% fct_reorder(value, max)) %>%
mutate(percentile = as_factor(percentile)) %>%
ggplot(aes(x = region, y = value, color=percentile)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Household Income Percentiles by Region",
y = "Times greater than bottom 20%",
x = "Region")
unique(df_high_low$district)
df_high_low
df_high_low
df_high_low %>%
mutate(region = as_factor(region)) %>%
mutate(district = as_factor(district)) %>%
ggplot(aes(x = district, y = fouryr_val_high, color=region)) +
geom_point(size = 4, alpha = 0.9) +
coord_flip() +
theme_din(xgrid = T, ygrid = "dotted") +
scale_color_manual(values = tol12[c(1, 2, 3, 4, 5, 7, 9, 10)]) +
labs(title = "Bullying by Region",
y = "Total Incidents, 2013-2017",
x = "Region")
nh_dists <- school_dists %>%
dplyr::filter(region %in% c("New Haven Inner Ring", "New Haven Outer Ring")) %>%
rbind(c("New Haven Inner Ring", "New Haven")) %>%
rename(ring = region)
nh_dists$district <- nh_dists$district %>%
paste("School District")
nh_dists
df_high_low
source(here("_utils/edsight_functions.R"))
nh_dists <- school_dists %>%
dplyr::filter(region %in% c("New Haven Inner Ring", "New Haven Outer Ring")) %>%
rbind(c("New Haven Inner Ring", "New Haven")) %>%
rename(ring = region)
nh_dists$district <- nh_dists$district %>%
paste("School District")
df1 <- read_csv(here("edsight/raw_data", "bullying1318.csv"), skip=4) %>%
select(-`District Code`)
# df2 <- read_csv(here("edsight/raw_data", "bullying1213.csv"), skip=4) %>%
#   gather(`Bullying Type`, '2012-13', 3:4) %>%
#   rename(`District` = `DISTRICT`) %>%
#   arrange(District) %>%
#   select(-`District Code`)
# df <- left_join(df1, df2) %>%
df <- df1 %>%
gather(`year`, value, '2013-14':'2017-18') %>%
dplyr::filter(.$'District' %in% nh_dists$'district') %>%
rename('district' = "District") %>%
right_join(nh_dists, by = 'district') %>%
drop_na() %>% # 152, 5 // 130, 5
mutate_at('year', str_sub, start=1, end=4) %>% # first year of the school year
mutate_at('year', as.numeric) %>%
mutate_at("district", str_replace, pattern = " School District", replacement = "") %>%
arrange(district, year) %>%
rename(type = `Bullying Type`)
df_high <- df %>%
mutate_at("value", str_replace, pattern = "\\*", replacement = "5") %>%
mutate_at("value", as.numeric) %>%
group_by(district, type) %>%
mutate(fouryr_val_high = sum(value)) %>%
ungroup() %>%
filter(year == 2017) %>%
select(ring, district, type, fouryr_val_high)
df_low <- df %>%
mutate_at("value", str_replace, pattern = "\\*", replacement = "0") %>%
mutate_at("value", as.numeric) %>%
group_by(district, type) %>%
mutate(fouryr_val_low = sum(value)) %>%
ungroup() %>%
filter(year == 2017) %>%
select(ring, district, type, fouryr_val_low)
df_high_low <- bind_cols(df_high, df_low) %>%
filter(type == "Number of students with at least 1 bullying incident") %>%
select(ring, district, fouryr_val_low, fouryr_val_high)
unique(df_high_low$district)
df_high_low
df_high_low %>%
mutate(region = regions[district %in% regions,])
df_high_low %>%
mutate(region = regions[district %in% regions])
df_high_low %>%
mutate(region = regions[regions %in% districts])
df_high_low %>%
mutate(region = regions[regions %in% district])
regions %in% df_high_low$district
df_high_low$district
df_high_low
df_high_low$district
regions %in% df_high_low$district
regions
regions2 <- c("New Haven Town", "East Haven, Branford, Guilford, Madison & North Branford Towns", "Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany Towns", "West Haven, Milford & Orange Towns")
regions2 %in% df_high_low$district
df_high_low$district %in% regions2
str_detect(df_high_low$district %in% regions2)
str_detect(df_high_low$district, regions2)
str_detect(regions2, df_high_low$district)
df_high_low %>%
mutate(region = regions2[str_detect(regions2, df_high_low$district)])
str_detect(regions2, df_high_low$district)
df_high_low$district
regions2[str_detect(regions2, df_high_low$district)]
regions2 <- c("New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"West Haven, Milford & Orange")
regions2[str_detect(regions2, df_high_low$district)]
str_which(regions2, df_high_low$district)
df_high_low
regions2 <- c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
regions2
df_high_low %>%
bind_cols(regions_2)
df_high_low %>%
bind_cols(regions2)
df_high_low %>%
bind_cols(regions2)
df_high_low %>%
bind_cols(df_high_low, regions2)
bind_cols(df_high_low, regions2)
bind_cols(df_high_low, regions2)
library(fuzzyjoin)
install.packages("fuzzyjoin")
install.packages("fuzzyjoin")
library(fuzzyjoin)
library(fuzzyjoin)
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
)
regions2
df_high_low %>% fuzzy_inner_join(regions2, by = c("district" = "region"), match_fun = str_detect)
df_high_low
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble %>% mutate_at(region, as.character)
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble %>%
mutate_at(region, as.character)
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
NA,
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble %>%
mutate_at(region, as.character)
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
"NA",
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
"NA",
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble
regions2
df_high_low
df_high_low %>%
filter(-(district == "North Haven"))
df_high_low %>%
filter(-district == "North Haven"))
df_high_low %>%
filter(district != "North Haven"))
df_high_low %>%
filter(district != "North Haven")
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% as_tibble
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
"NA",
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% lapply(as.character)
regions2
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
"NA",
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% lapply(as.character) %>% as_tibble()
regions2
df_high_low %>% fuzzy_inner_join(regions2, by = c("district" = "region"), match_fun = str_detect)
df1 <- read_csv(here("edsight/raw_data", "bullying1318.csv"), skip=4) %>%
select(-`District Code`)
# df2 <- read_csv(here("edsight/raw_data", "bullying1213.csv"), skip=4) %>%
#   gather(`Bullying Type`, '2012-13', 3:4) %>%
#   rename(`District` = `DISTRICT`) %>%
#   arrange(District) %>%
#   select(-`District Code`)
# df <- left_join(df1, df2) %>%
df <- df1 %>%
gather(`year`, value, '2013-14':'2017-18') %>%
dplyr::filter(.$'District' %in% nh_dists$'district') %>%
rename('district' = "District") %>%
right_join(nh_dists, by = 'district') %>%
drop_na() %>% # 152, 5 // 130, 5
mutate_at('year', str_sub, start=1, end=4) %>% # first year of the school year
mutate_at('year', as.numeric) %>%
mutate_at("district", str_replace, pattern = " School District", replacement = "") %>%
arrange(district, year) %>%
rename(type = `Bullying Type`)
df_high <- df %>%
mutate_at("value", str_replace, pattern = "\\*", replacement = "5") %>%
mutate_at("value", as.numeric) %>%
group_by(district, type) %>%
mutate(fouryr_val_high = sum(value)) %>%
ungroup() %>%
filter(year == 2017) %>%
select(ring, district, type, fouryr_val_high)
df_low <- df %>%
mutate_at("value", str_replace, pattern = "\\*", replacement = "0") %>%
mutate_at("value", as.numeric) %>%
group_by(district, type) %>%
mutate(fouryr_val_low = sum(value)) %>%
ungroup() %>%
filter(year == 2017) %>%
select(ring, district, type, fouryr_val_low)
df_high_low <- bind_cols(df_high, df_low) %>%
filter(type == "Number of students with at least 1 bullying incident") %>%
select(ring, district, fouryr_val_low, fouryr_val_high)
unique(df_high_low$district)
library(fuzzyjoin)
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
rep("East Haven, Branford, Guilford, Madison & North Branford", 3),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven",
"East Haven, Branford, Guilford, Madison & North Branford",
"NA",
rep("West Haven, Milford & Orange",2),
"Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany"
)
) %>% lapply(as.character) %>% as_tibble()
df_high_low %>% regex_inner_join(regions2, by = c("district" = "region"))
df_high_low %>% regex_left_join(regions2, by = c("district" = "region"))
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven"
)
) %>% lapply(as.character) %>% as_tibble()
df_high_low %>% regex_left_join(regions2, by = c("district" = "region"))
regions2 %>% regex_right_join(df_high_low, by = c("region" = "district"))
regions2 <- data.frame(
region = c("Hamden, Ansonia, Seymour, Derby, Woodbridge & Bethany",
"East Haven, Branford, Guilford, Madison & North Branford",
"West Haven, Milford & Orange",
"New Haven"
)
) %>% lapply(as.character)
regions2 %>% regex_right_join(df_high_low, by = c("region" = "district"))
